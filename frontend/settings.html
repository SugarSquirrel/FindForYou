<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>è¨­å®š | æ—¥å¸¸ç‰©å“æœå°‹åŠ©æ‰‹</title>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: 'Noto Sans TC', sans-serif;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%);
            color: #fff;
            min-height: 100vh;
            padding: 20px;
        }
        .container {
            max-width: 900px;
            margin: 0 auto;
        }
        .header {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 30px;
        }
        .back-btn {
            background: rgba(255,255,255,0.1);
            border: none;
            color: #fff;
            padding: 10px 20px;
            border-radius: 8px;
            cursor: pointer;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            gap: 8px;
            transition: all 0.2s;
        }
        .back-btn:hover { background: rgba(255,255,255,0.2); }
        h1 { font-size: 24px; }
        
        .card {
            background: rgba(255,255,255,0.1);
            backdrop-filter: blur(10px);
            border-radius: 16px;
            padding: 24px;
            margin-bottom: 20px;
        }
        .card h2 {
            font-size: 18px;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        .card p.desc {
            color: #aaa;
            margin-bottom: 20px;
            font-size: 14px;
        }
        
        /* æŒ‰éˆ•æ¨£å¼ */
        .btn {
            padding: 10px 20px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 500;
            transition: all 0.2s;
        }
        .btn-primary {
            background: linear-gradient(135deg, #38ef7d, #11998e);
            color: #fff;
        }
        .btn-primary:hover { transform: translateY(-2px); box-shadow: 0 4px 15px rgba(56,239,125,0.4); }
        .btn-danger { background: #f5576c; color: #fff; }
        .btn-secondary { background: rgba(255,255,255,0.1); color: #fff; }
        
        /* è¼¸å…¥æ¡† */
        input, select, textarea {
            background: rgba(255,255,255,0.1);
            border: 1px solid rgba(255,255,255,0.2);
            color: #fff;
            padding: 10px 14px;
            border-radius: 8px;
            font-size: 14px;
            width: 100%;
        }
        input:focus, select:focus, textarea:focus {
            outline: none;
            border-color: #38ef7d;
        }
        input::placeholder, textarea::placeholder { color: rgba(255,255,255,0.5); }
        
        /* ç‰©å“å¡ç‰‡ */
        .object-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
            gap: 16px;
            margin-bottom: 20px;
        }
        .object-card {
            background: rgba(0,0,0,0.3);
            border-radius: 12px;
            overflow: hidden;
            cursor: pointer;
            transition: all 0.2s;
            border: 2px solid transparent;
        }
        .object-card:hover {
            border-color: #38ef7d;
            transform: translateY(-2px);
        }
        .object-card img {
            width: 100%;
            height: 120px;
            object-fit: cover;
            background: rgba(255,255,255,0.05);
        }
        .object-card .info {
            padding: 12px;
        }
        .object-card .name {
            font-weight: 500;
            margin-bottom: 4px;
        }
        .object-card .meta {
            font-size: 12px;
            color: #888;
        }
        .object-card .badge {
            display: inline-block;
            background: rgba(56,239,125,0.2);
            color: #38ef7d;
            padding: 2px 8px;
            border-radius: 10px;
            font-size: 11px;
            margin-top: 6px;
        }
        
        /* æ–°å¢ç‰©å“æŒ‰éˆ• */
        .add-object-btn {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 200px;
            background: rgba(56,239,125,0.1);
            border: 2px dashed rgba(56,239,125,0.3);
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.2s;
        }
        .add-object-btn:hover {
            background: rgba(56,239,125,0.2);
            border-color: #38ef7d;
        }
        .add-object-btn .icon { font-size: 48px; margin-bottom: 10px; }
        .add-object-btn span { color: #38ef7d; font-weight: 500; }
        
        /* Modal */
        .modal {
            position: fixed;
            top: 0; left: 0; right: 0; bottom: 0;
            background: rgba(0,0,0,0.9);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
        }
        .modal-content {
            background: rgba(30,30,50,0.98);
            border-radius: 16px;
            padding: 24px;
            max-width: 500px;
            width: 90%;
        }
        .modal-content h3 { margin-bottom: 20px; }
        .modal-content .form-group { margin-bottom: 16px; }
        .modal-content label {
            display: block;
            color: #aaa;
            margin-bottom: 6px;
            font-size: 14px;
        }
        .modal-content .btn-group {
            display: flex;
            gap: 10px;
            justify-content: flex-end;
            margin-top: 20px;
        }
        
        /* ä¸Šå‚³å€ */
        .upload-area {
            border: 2px dashed rgba(255,255,255,0.3);
            border-radius: 12px;
            padding: 30px;
            text-align: center;
            cursor: pointer;
            transition: all 0.2s;
        }
        .upload-area:hover {
            border-color: #38ef7d;
            background: rgba(56,239,125,0.1);
        }
        .upload-area.has-image { padding: 10px; }
        .upload-area img {
            max-width: 100%;
            max-height: 200px;
            border-radius: 8px;
        }
        .upload-area .placeholder { color: #888; }
        .upload-area .placeholder .icon { font-size: 48px; margin-bottom: 10px; }
        
        /* Toast */
        .toast {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: #38ef7d;
            color: #000;
            padding: 12px 24px;
            border-radius: 8px;
            animation: slideIn 0.3s ease;
            z-index: 2000;
        }
        @keyframes slideIn {
            from { transform: translateY(100px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }
        
        .info-box {
            background: rgba(56,239,125,0.1);
            border-left: 4px solid #38ef7d;
            padding: 16px;
            border-radius: 8px;
            margin-bottom: 20px;
        }
        .info-box .title {
            display: flex;
            align-items: center;
            gap: 8px;
            font-weight: 500;
            margin-bottom: 8px;
        }
        .info-box p {
            color: #aaa;
            font-size: 14px;
            line-height: 1.6;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <a href="/" class="back-btn">â† è¿”å›</a>
            <h1>âš™ï¸ è¨­å®š</h1>
        </div>
        
        <!-- èªªæ˜ -->
        <div class="info-box">
            <div class="title">ğŸ“¹ å‰ç«¯æ”å½±æ©Ÿæ¶æ§‹</div>
            <p>
                æ”å½±æ©Ÿç”±ç€è¦½å™¨ç›´æ¥æ§åˆ¶ï¼Œç„¡éœ€å¾Œç«¯é…ç½®ã€‚åœ¨é¦–é é»æ“Šã€Œé–‹å•Ÿæ”å½±æ©Ÿã€å³å¯é–‹å§‹åµæ¸¬ã€‚
                è«‹ç¢ºä¿å·²æˆæ¬Šç€è¦½å™¨ä½¿ç”¨æ”å½±æ©Ÿæ¬Šé™ã€‚
            </p>
        </div>
        
        <!-- æˆ‘çš„ç‰©å“ -->
        <div class="card">
            <h2>ğŸ“¦ æˆ‘çš„ç‰©å“</h2>
            <p class="desc">è¨»å†Šä½ çš„å€‹äººç‰©å“ï¼Œç³»çµ±æœƒé€é AI ç‰¹å¾µæ¯”å°ä¾†è­˜åˆ¥å®ƒå€‘ã€‚æ‹æ”å¤šå¼µä¸åŒè§’åº¦çš„ç…§ç‰‡å¯æé«˜è­˜åˆ¥æº–ç¢ºåº¦ã€‚</p>
            
            <div class="object-grid" id="objectGrid">
                <!-- å‹•æ…‹å¡«å…¥ -->
            </div>
        </div>
        
        <!-- å¸¸ç”¨ç‰©å“å¿«æ· -->
        <div class="card">
            <h2>â­ å¸¸ç”¨ç‰©å“å¿«æ·</h2>
            <p class="desc">è‡ªè¨‚é¦–é é¡¯ç¤ºçš„å¸¸ç”¨ç‰©å“å¿«æ·æŒ‰éˆ•</p>
            
            <div id="quickItemsList" style="display:flex; flex-wrap:wrap; gap:8px; margin-bottom:20px;"></div>
            
            <div style="display:grid; grid-template-columns: 1fr 1fr 80px auto; gap:12px; padding:16px; background:rgba(255,215,0,0.1); border-radius:12px; border:2px dashed rgba(255,215,0,0.3);">
                <input type="text" id="newQuickItemName" placeholder="ç‰©å“åç¨±">
                <input type="text" id="newQuickItemIcon" placeholder="åœ–ç¤º (å¦‚: ğŸ“±)">
                <input type="number" id="newQuickItemOrder" placeholder="é †åº" min="1" max="10" value="1">
                <button class="btn btn-primary" onclick="addQuickItem()">æ–°å¢</button>
            </div>
        </div>
        
        <!-- ç³»çµ±è³‡è¨Š -->
        <div class="card">
            <h2>â„¹ï¸ ç³»çµ±è³‡è¨Š</h2>
            <div id="systemInfo" style="color:#aaa;">è¼‰å…¥ä¸­...</div>
        </div>
    </div>

    <script>
        const API_BASE = '';
        
        // ========================================
        // ç‰©å“ç®¡ç†
        // ========================================
        
        async function loadObjects() {
            try {
                const res = await fetch(`${API_BASE}/api/objects`);
                const data = await res.json();
                renderObjectGrid(data.objects || []);
            } catch (e) {
                console.error('è¼‰å…¥ç‰©å“å¤±æ•—', e);
                document.getElementById('objectGrid').innerHTML = `
                    <div style="text-align:center; padding:40px; color:#888;">
                        <div style="font-size:48px; margin-bottom:15px;">âš ï¸</div>
                        <p>ç„¡æ³•é€£æ¥å¾Œç«¯æœå‹™</p>
                    </div>
                `;
            }
        }
        
        function renderObjectGrid(objects) {
            const container = document.getElementById('objectGrid');
            
            let html = objects.map(obj => `
                <div class="object-card" onclick="showObjectDetail('${obj.id}')">
                    <img src="${obj.thumbnail || 'data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><rect fill=%22%23333%22 width=%22100%22 height=%22100%22/><text x=%2250%22 y=%2255%22 text-anchor=%22middle%22 fill=%22%23666%22 font-size=%2230%22>ğŸ“¦</text></svg>'}" alt="${obj.name_zh}">
                    <div class="info">
                        <div class="name">${obj.name_zh}</div>
                        <div class="meta">${obj.name}</div>
                        <div class="badge">${obj.embedding_count} å¼µç…§ç‰‡</div>
                    </div>
                </div>
            `).join('');
            
            html += `
                <div class="add-object-btn" onclick="showRegisterModal()">
                    <div class="icon">â•</div>
                    <span>æ–°å¢ç‰©å“</span>
                </div>
            `;
            
            container.innerHTML = html;
        }
        
        function showRegisterModal() {
            const modal = document.createElement('div');
            modal.className = 'modal';
            modal.id = 'registerModal';
            modal.innerHTML = `
                <div class="modal-content">
                    <h3>ğŸ“¦ è¨»å†Šæ–°ç‰©å“</h3>
                    
                    <div class="form-group">
                        <label>ç‰©å“ç…§ç‰‡</label>
                        <div class="upload-area" id="uploadArea" onclick="document.getElementById('imageInput').click()">
                            <div class="placeholder">
                                <div class="icon">ğŸ“·</div>
                                <div>é»æ“Šä¸Šå‚³ç…§ç‰‡</div>
                            </div>
                        </div>
                        <input type="file" id="imageInput" accept="image/*" style="display:none" onchange="previewImage(this)">
                    </div>
                    
                    <div class="form-group">
                        <label>ç‰©å“åç¨± (è‹±æ–‡ ID)</label>
                        <input type="text" id="regName" placeholder="ä¾‹å¦‚: my_wallet">
                    </div>
                    
                    <div class="form-group">
                        <label>ä¸­æ–‡åç¨±</label>
                        <input type="text" id="regNameZh" placeholder="ä¾‹å¦‚: æˆ‘çš„éŒ¢åŒ…">
                    </div>
                    
                    <div class="btn-group">
                        <button class="btn btn-secondary" onclick="closeModal('registerModal')">å–æ¶ˆ</button>
                        <button class="btn btn-primary" onclick="registerObject()">è¨»å†Š</button>
                    </div>
                </div>
            `;
            
            modal.addEventListener('click', (e) => {
                if (e.target === modal) closeModal('registerModal');
            });
            
            document.body.appendChild(modal);
        }
        
        function previewImage(input) {
            if (input.files && input.files[0]) {
                const reader = new FileReader();
                reader.onload = (e) => {
                    const area = document.getElementById('uploadArea');
                    area.classList.add('has-image');
                    area.innerHTML = `<img src="${e.target.result}" alt="é è¦½">`;
                };
                reader.readAsDataURL(input.files[0]);
            }
        }
        
        async function registerObject() {
            const imageInput = document.getElementById('imageInput');
            const name = document.getElementById('regName').value.trim();
            const nameZh = document.getElementById('regNameZh').value.trim();
            
            if (!imageInput.files || !imageInput.files[0]) {
                showToast('è«‹é¸æ“‡ç…§ç‰‡');
                return;
            }
            if (!name || !nameZh) {
                showToast('è«‹å¡«å¯«å®Œæ•´è³‡è¨Š');
                return;
            }
            
            const formData = new FormData();
            formData.append('image', imageInput.files[0]);
            formData.append('name', name);
            formData.append('name_zh', nameZh);
            
            try {
                showToast('è¨»å†Šä¸­...');
                const res = await fetch(`${API_BASE}/api/objects/register`, {
                    method: 'POST',
                    body: formData
                });
                const data = await res.json();
                
                if (data.success) {
                    showToast(`å·²è¨»å†Š: ${nameZh}`);
                    closeModal('registerModal');
                    loadObjects();
                } else {
                    showToast(data.detail || 'è¨»å†Šå¤±æ•—');
                }
            } catch (e) {
                console.error('è¨»å†Šå¤±æ•—', e);
                showToast('è¨»å†Šå¤±æ•—');
            }
        }
        
        async function showObjectDetail(objId) {
            try {
                const res = await fetch(`${API_BASE}/api/objects/${objId}`);
                const data = await res.json();
                
                if (!data.success) {
                    showToast('è¼‰å…¥å¤±æ•—');
                    return;
                }
                
                const obj = data.object;
                
                const modal = document.createElement('div');
                modal.className = 'modal';
                modal.id = 'detailModal';
                modal.innerHTML = `
                    <div class="modal-content">
                        <h3>ğŸ“¦ ${obj.name_zh}</h3>
                        
                        <div style="margin-bottom:16px;">
                            <div style="display:flex; flex-wrap:wrap; gap:8px;">
                                ${obj.images.map(img => `
                                    <img src="${img}" style="width:80px; height:80px; object-fit:cover; border-radius:8px;">
                                `).join('')}
                            </div>
                        </div>
                        
                        <div style="background:rgba(0,0,0,0.2); padding:12px; border-radius:8px; margin-bottom:16px;">
                            <div style="display:flex; justify-content:space-between; margin-bottom:8px;">
                                <span style="color:#888;">ID</span>
                                <span>${obj.id}</span>
                            </div>
                            <div style="display:flex; justify-content:space-between; margin-bottom:8px;">
                                <span style="color:#888;">è‹±æ–‡åç¨±</span>
                                <span>${obj.name}</span>
                            </div>
                            <div style="display:flex; justify-content:space-between;">
                                <span style="color:#888;">ç…§ç‰‡æ•¸é‡</span>
                                <span>${obj.embedding_count}</span>
                            </div>
                        </div>
                        
                        <div class="btn-group" style="justify-content:space-between;">
                            <button class="btn btn-danger" onclick="deleteObject('${obj.id}')">åˆªé™¤ç‰©å“</button>
                            <div style="display:flex; gap:8px;">
                                <button class="btn btn-secondary" onclick="closeModal('detailModal')">é—œé–‰</button>
                                <button class="btn btn-primary" onclick="addMorePhotos('${obj.id}')">æ–°å¢ç…§ç‰‡</button>
                            </div>
                        </div>
                    </div>
                `;
                
                modal.addEventListener('click', (e) => {
                    if (e.target === modal) closeModal('detailModal');
                });
                
                document.body.appendChild(modal);
            } catch (e) {
                console.error('è¼‰å…¥ç‰©å“è©³æƒ…å¤±æ•—', e);
                showToast('è¼‰å…¥å¤±æ•—');
            }
        }
        
        function addMorePhotos(objId) {
            closeModal('detailModal');
            
            const modal = document.createElement('div');
            modal.className = 'modal';
            modal.id = 'addPhotoModal';
            modal.innerHTML = `
                <div class="modal-content">
                    <h3>ğŸ“· æ–°å¢ç…§ç‰‡</h3>
                    
                    <div class="form-group">
                        <div class="upload-area" id="uploadAreaAdd" onclick="document.getElementById('imageInputAdd').click()">
                            <div class="placeholder">
                                <div class="icon">ğŸ“·</div>
                                <div>é»æ“Šä¸Šå‚³ç…§ç‰‡</div>
                            </div>
                        </div>
                        <input type="file" id="imageInputAdd" accept="image/*" style="display:none" onchange="previewImageAdd(this)">
                    </div>
                    
                    <div class="btn-group">
                        <button class="btn btn-secondary" onclick="closeModal('addPhotoModal')">å–æ¶ˆ</button>
                        <button class="btn btn-primary" onclick="uploadMorePhoto('${objId}')">ä¸Šå‚³</button>
                    </div>
                </div>
            `;
            
            modal.addEventListener('click', (e) => {
                if (e.target === modal) closeModal('addPhotoModal');
            });
            
            document.body.appendChild(modal);
        }
        
        function previewImageAdd(input) {
            if (input.files && input.files[0]) {
                const reader = new FileReader();
                reader.onload = (e) => {
                    const area = document.getElementById('uploadAreaAdd');
                    area.classList.add('has-image');
                    area.innerHTML = `<img src="${e.target.result}" alt="é è¦½">`;
                };
                reader.readAsDataURL(input.files[0]);
            }
        }
        
        async function uploadMorePhoto(objId) {
            const imageInput = document.getElementById('imageInputAdd');
            
            if (!imageInput.files || !imageInput.files[0]) {
                showToast('è«‹é¸æ“‡ç…§ç‰‡');
                return;
            }
            
            const formData = new FormData();
            formData.append('image', imageInput.files[0]);
            
            try {
                showToast('ä¸Šå‚³ä¸­...');
                const res = await fetch(`${API_BASE}/api/objects/${objId}/images`, {
                    method: 'POST',
                    body: formData
                });
                const data = await res.json();
                
                if (data.success) {
                    showToast('ç…§ç‰‡å·²æ–°å¢');
                    closeModal('addPhotoModal');
                    loadObjects();
                } else {
                    showToast(data.detail || 'ä¸Šå‚³å¤±æ•—');
                }
            } catch (e) {
                console.error('ä¸Šå‚³å¤±æ•—', e);
                showToast('ä¸Šå‚³å¤±æ•—');
            }
        }
        
        async function deleteObject(objId) {
            if (!confirm('ç¢ºå®šè¦åˆªé™¤æ­¤ç‰©å“ï¼Ÿæ­¤æ“ä½œç„¡æ³•å¾©åŸã€‚')) return;
            
            try {
                const res = await fetch(`${API_BASE}/api/objects/${objId}`, {
                    method: 'DELETE'
                });
                const data = await res.json();
                
                if (data.success) {
                    showToast('å·²åˆªé™¤');
                    closeModal('detailModal');
                    loadObjects();
                } else {
                    showToast('åˆªé™¤å¤±æ•—');
                }
            } catch (e) {
                console.error('åˆªé™¤å¤±æ•—', e);
                showToast('åˆªé™¤å¤±æ•—');
            }
        }
        
        function closeModal(id) {
            document.getElementById(id)?.remove();
        }
        
        // ========================================
        // å¸¸ç”¨ç‰©å“ç®¡ç†
        // ========================================
        
        const DEFAULT_QUICK_ITEMS = [
            { name: 'æ‰‹æ©Ÿ', icon: 'ğŸ“±', order: 1 },
            { name: 'é‘°åŒ™', icon: 'ğŸ”‘', order: 2 },
            { name: 'çœ¼é¡', icon: 'ğŸ‘“', order: 3 },
            { name: 'éŒ¢åŒ…', icon: 'ğŸ‘›', order: 4 }
        ];
        
        function getQuickItems() {
            const saved = localStorage.getItem('quickItems');
            return saved ? JSON.parse(saved) : DEFAULT_QUICK_ITEMS;
        }
        
        function saveQuickItems(items) {
            localStorage.setItem('quickItems', JSON.stringify(items));
        }
        
        function loadQuickItems() {
            renderQuickItemsList(getQuickItems());
        }
        
        function renderQuickItemsList(items) {
            const container = document.getElementById('quickItemsList');
            if (items.length === 0) {
                container.innerHTML = '<p style="color:#aaa;">å°šæœªè¨­å®šå¸¸ç”¨ç‰©å“</p>';
                return;
            }
            
            container.innerHTML = items.map(item => `
                <div style="display:inline-flex; align-items:center; gap:8px; background:rgba(255,215,0,0.2); padding:8px 12px; border-radius:20px; font-size:14px;">
                    <span>${item.icon}</span>
                    <span>${item.name}</span>
                    <button onclick="removeQuickItem('${item.name}')" style="background:rgba(245,87,108,0.5); border:none; color:#fff; width:20px; height:20px; border-radius:50%; cursor:pointer; font-size:12px;">âœ•</button>
                </div>
            `).join('');
        }
        
        function addQuickItem() {
            const name = document.getElementById('newQuickItemName').value.trim();
            const icon = document.getElementById('newQuickItemIcon').value.trim() || 'ğŸ“¦';
            const order = parseInt(document.getElementById('newQuickItemOrder').value) || 1;
            
            if (!name) { alert('è«‹è¼¸å…¥ç‰©å“åç¨±'); return; }
            
            const items = getQuickItems();
            if (items.find(i => i.name === name)) {
                showToast('ç‰©å“å·²å­˜åœ¨');
                return;
            }
            
            items.push({ name, icon, order });
            items.sort((a, b) => a.order - b.order);
            saveQuickItems(items);
            
            document.getElementById('newQuickItemName').value = '';
            document.getElementById('newQuickItemIcon').value = '';
            
            showToast(`å·²æ–°å¢: ${icon} ${name}`);
            loadQuickItems();
        }
        
        function removeQuickItem(name) {
            if (!confirm(`ç¢ºå®šè¦ç§»é™¤ã€Œ${name}ã€ï¼Ÿ`)) return;
            
            let items = getQuickItems();
            items = items.filter(i => i.name !== name);
            saveQuickItems(items);
            
            showToast(`å·²ç§»é™¤: ${name}`);
            loadQuickItems();
        }
        
        // ========================================
        // ç³»çµ±è³‡è¨Š
        // ========================================
        
        async function loadSystemInfo() {
            try {
                const res = await fetch(`${API_BASE}/api/health`);
                const data = await res.json();
                
                document.getElementById('systemInfo').innerHTML = `
                    <div style="display:grid; gap:8px;">
                        <div style="display:flex; justify-content:space-between;">
                            <span>ç‰ˆæœ¬</span>
                            <span>${data.version}</span>
                        </div>
                        <div style="display:flex; justify-content:space-between;">
                            <span>åµæ¸¬å™¨ç‹€æ…‹</span>
                            <span style="color:${data.detector_ready ? '#38ef7d' : '#f5576c'};">
                                ${data.detector_ready ? 'å°±ç·’' : 'æœªå°±ç·’'}
                            </span>
                        </div>
                        <div style="display:flex; justify-content:space-between;">
                            <span>å·²è¨»å†Šç‰©å“</span>
                            <span>${data.registered_objects} å€‹</span>
                        </div>
                    </div>
                `;
            } catch (e) {
                document.getElementById('systemInfo').innerHTML = '<span style="color:#f5576c;">ç„¡æ³•é€£æ¥å¾Œç«¯</span>';
            }
        }
        
        // ========================================
        // å·¥å…·å‡½æ•¸
        // ========================================
        
        function showToast(msg) {
            const toast = document.createElement('div');
            toast.className = 'toast';
            toast.textContent = msg;
            document.body.appendChild(toast);
            setTimeout(() => toast.remove(), 3000);
        }
        
        // åˆå§‹åŒ–
        loadObjects();
        loadQuickItems();
        loadSystemInfo();
    </script>
</body>
</html>
